---
title: _复盘：脱敏业务的ReDOS攻击防护
date: 2024-08-14 19:51:18
tags: 
categories: 
onlyOneDrive: "false"
---
# 1. 背景（Situation）

业务场景为用户输入的自定义正则，网上的方案大多是代码里面固定的正则，这种可以通过扫描工具检测出来，但是自定义正则无法确定正则的输入的内容。当时想到的方案有2个，
方案一：切换正则表达式引擎
- NFA-需要回溯，语法是re语法，例如JAVA的regex库，时间复杂度为o（2的n次方）
- DFA-不需要回溯，语法是re2，区别是语法不同，且无法捕获子表达式，时间复杂度为n，例如google的re2j库
方案二：设置正则匹配超时时间
最终决策使用方案二。

# 2. 任务（Task）
说明你要实现的目标

# 3. 行动（Action）
说明你为完成任务，具体的行动

# 4. 结果（Result）
你行动后的结果，是否完成任务中的目标


# 5. 好与坏（Think）
总结这个事情你做的好的方面，与不好的方面

## 5.1 做得好的方面

## 5.2 做得不好的方面